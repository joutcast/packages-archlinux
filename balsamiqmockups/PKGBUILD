# Maintainer: John K. Luebs <jkl@johnluebs.com>
# Contributor: tang0th67

# I maintain this on github, feel free to submit a pull request to
# https://github.com/jkl1337/packages-archlinux.git

pkgname='balsamiqmockups'
pkgver=2.2.21
license=('custom')
pkgrel=1
arch=('i686' 'x86_64')
pkgdesc="The Adobe Air based Mockup client. Not free or open source, there is a 7 day free trial."
url=('http://balsamiq.com/products/mockups')
source=("http://builds.balsamiq.com/b/mockups-desktop/MockupsForDesktop.air" 'balsamiqmockups.desktop')
sha1sums=('ffad31a8978f53b8e12ce6289a5e8510cba6440f'
          '3ae15ae952b33f33a0c744feed1b14f29a87f205')
noextract=("MockupsForDesktop.air")
depends=(adobe-air-sdk)
makedepends=(unzip)
conflicts=('balsamiq-mockups')

package() {
  cd "$srcdir"
  mkdir "$pkgdir"/opt/
  mkdir "$pkgdir"/opt/airapps
  mkdir "$pkgdir"/usr/
  mkdir "$pkgdir"/usr/bin
  install "$srcdir"/MockupsForDesktop.air  "$pkgdir"/opt/airapps/balsamiqmockups.air
  mkdir "$pkgdir"/opt/airapps/balsamiqmockups
  cd "$pkgdir"/opt/airapps/balsamiqmockups
  unzip ../balsamiqmockups.air
  echo "#!/bin/bash" >> "$pkgdir"/usr/bin/balsamiqmockups
  echo "/opt/adobe-air-sdk/bin/adl -nodebug /opt/airapps/balsamiqmockups/META-INF/AIR/application.xml /opt/airapps/balsamiqmockups/" >> "$pkgdir"/usr/bin/balsamiqmockups
  chmod +x "$pkgdir"/usr/bin/balsamiqmockups
  mkdir -p "$pkgdir"/usr/share/applications
  install "$srcdir"/${pkgname}.desktop "$pkgdir"/usr/share/applications/ 
}
